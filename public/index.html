<html ng-app="fbFeedApp">
	<head>
		<title>Facebook Feeds</title>
		<!-- javascript libs -->
		<script language="JavaScript" src="js/lib/jquery-2.1.1.min.js"></script>
		<script language="JavaScript" src="js/lib/angular.min.js"></script>
		<script language="JavaScript" src="js/lib/angular-route.min.js"></script>
		<!-- javascript code -->
		<script language="JavaScript" src="js/fb_module.js"></script>
		<script language="JavaScript" src="js/controller.js"></script>
    	<script>
			window.fbAsyncInit = function() {
				FB.init({
					appId      : '1467072543528237',
					status     : true,
					xfbml      : true
				});
				FB.Event.subscribe('auth.authResponseChange', function(response) {						
					if(response.status === 'not_authorized'){
						FB.login();
					}else if(response.status === 'connected'){
						var $scope = angular.element($('#fb-root')).scope();
						fetchData($scope);
					}else{
						FB.login();
					}
				});				
			};
			(function(d, s, id){
				var js, fjs = d.getElementsByTagName(s)[0];
				if (d.getElementById(id)) {return;}
				js = d.createElement(s); js.id = id;
				js.src = "//connect.facebook.net/en_US/all.js";
				fjs.parentNode.insertBefore(js, fjs);
			}(document, 'script', 'facebook-jssdk'));
    	</script>
	</head>
	<body ng-controller="listFeed">
		<ul>
    		<li ng-repeat="feed in feeds">
	      		<span>{{feed.name}}</span>
	      		<p>{{feed.value}}</p>
    		</li>
  		</ul>
		<div id="fb-root"></div>
		<div class="fb-login-button" data-max-rows="10" data-size="large" data-show-faces="true" 
				data-auto-logout-link="true" data-scope='email,user_likes,read_friendlists,read_stream'></div>
	</body>
</html>

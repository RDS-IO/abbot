<html>
	<head><title>Facebook Profiles</title></head>
	<body>
		<div id="fb-root"></div>
    	<script>
			window.fbAsyncInit = function() {
				FB.init({
					appId      : '1467072543528237',
					status     : true,
					xfbml      : true
				});
				FB.Event.subscribe('auth.authResponseChange', function(response) {
					if (response.status === 'connected') {
						testAPI();
					}else if(response.status === 'not_authorized'){
						FB.login();
					} else {
						FB.login();
					}
				});
			};
			(function(d, s, id){
				var js, fjs = d.getElementsByTagName(s)[0];
				if (d.getElementById(id)) {return;}
				js = d.createElement(s); js.id = id;
				js.src = "//connect.facebook.net/en_US/all.js";
				fjs.parentNode.insertBefore(js, fjs);
			}(document, 'script', 'facebook-jssdk'));

			function testAPI() {
				console.log('Welcome!  Fetching your information.... ' + FB.getAuthResponse().accessToken);
				FB.api('/me/permissions', function(response) {
					console.log("permissions");
					console.log(JSON.stringify(response.data[0]));
				});
				FB.api('/me/friendlists', function(response) {
					console.log("friend lists");
					for(var i in response.data){
						FB.api(response.data[i].id + '/members', function(response){
							for(var j in response.data){
								console.log(response.data[j].name);
							}
						});
					}
				});
			}
    	</script>
		<h2>Place login with Facebook Button</h2>
		<div class="fb-login-button" data-max-rows="10" data-size="large" data-show-faces="true" 
				data-auto-logout-link="true" data-scope='email,user_likes,read_friendlists'></div>
	</body>
</html>
